<input type='text' class='form-control form-control-sm'>
<div>
  <div><button class='btn btn-sm btn-secondary' value='Math.sin()'>sin</button><button class='btn btn-sm btn-secondary' value='Math.cos()'>cos</button><button class='btn btn-sm btn-secondary' value='Math.tg()'>tg</button><button class='btn btn-sm btn-secondary'>/</button></div>
  <div><button class='btn btn-sm btn-secondary'>7</button><button class='btn btn-sm btn-secondary'>8</button><button class='btn btn-sm btn-secondary'>9</button><button class='btn btn-sm btn-secondary' value='*'>&times;</button></div>
  <div><button class='btn btn-sm btn-secondary'>4</button><button class='btn btn-sm btn-secondary'>5</button><button class='btn btn-sm btn-secondary'>6</button><button class='btn btn-sm btn-secondary'>-</button></div>
  <div><button class='btn btn-sm btn-secondary'>1</button><button class='btn btn-sm btn-secondary'>2</button><button class='btn btn-sm btn-secondary'>3</button><button class='btn btn-sm btn-secondary'>+</button></div>
  <div><button class='btn btn-sm btn-danger'>C</button><button class='btn btn-sm btn-secondary'>0</button><button class='btn btn-sm btn-secondary'>.</button><button class='btn btn-sm btn-primary'>=</button></div>
</div>
<style>
  div>button {
    margin-right: 5px;
    margin-bottom: 5px;
    width: calc(25% - 4px);
  }

  div>button:last-child {
    margin-right: 0
  }

  body {
    padding: 1em;
    height: 100%;
  }

  input {
    margin-bottom: 1em;
  }
</style>

<script>
require('atomos-framework')
window.onload = function() {
  console.log("ddd")
  $(".btn-secondary").click(function() {
    $(".form-control")[0].focus();
    var data;
    if ($(this).attr("value")) data = $(this).attr("value");
    else data = $(this).text();
    var startPos = $(".form-control")[0].selectionStart;
    var endPos = $(".form-control")[0].selectionEnd;
    $(".form-control").val($(".form-control").val().substring(0, startPos) +
      data +
      $(".form-control").val().substring(endPos, $(".form-control").val().length))
      if ($(".form-control").val().includes(")")) {
        $(".form-control")[0].selectionStart = $(".form-control")[0].selectionStart - 1;
        $(".form-control")[0].selectionEnd = $(".form-control")[0].selectionStart;
      }
  })
  $(".btn-primary").click(calc);
  $(".btn-danger").click(function() {
    $(".form-control").val("")
  })
}
  function calc() {
    $("input").val(
      eval($("input").val())
    )
  }
</script>
